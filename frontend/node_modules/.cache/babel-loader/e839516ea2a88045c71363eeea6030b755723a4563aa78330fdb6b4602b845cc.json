{"ast":null,"code":"const board = [['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']];\n\n// pawn move validation\nfunction isValidPawnMove(from, to, piece) {\n  const [fromCol, fromRow] = from;\n  const [toCol, toRow] = to;\n  const direction = piece === 'P' ? -1 : 1;\n  const startRow = piece === 'P' ? 7 : 1;\n  if (toCol === fromCol) {\n    // Regular move\n\n    if (board[toRow][toCol] === '') {\n      if (toRow === fromRow + direction) return true;\n      if (fromRow === startRow + 1 && toRow === fromRow + 2 * direction && board[fromRow + direction][fromCol] === '') return true;\n    }\n  } else if (Math.abs(toCol - fromCol) === 1) {\n    // Capture\n    if (board[toRow][toCol] !== '' && isOpponentPiece(toRow, toCol, piece)) {\n      return toRow === fromRow + direction;\n    }\n  }\n  return false;\n}\n// valid rook move\nfunction isValidRookMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n  if (fromRow === toRow) {\n    const step = fromCol < toCol ? 1 : -1;\n    for (let col = fromCol + step; col !== toCol; col += step) {\n      if (board[fromRow][col] !== '') return false;\n    }\n  } else {\n    const step = fromRow < toRow ? 1 : -1;\n    for (let row = fromRow + step; row !== toRow; row += step) {\n      if (board[row][fromCol] !== '') return false;\n    }\n  }\n  return true;\n}\n// valid knight move\nfunction isValidKnightMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n  return rowDiff === 2 && colDiff === 1 || rowDiff === 1 && colDiff === 2;\n}\n// valid bishop move\nfunction isValidBishopMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n  const rowStep = fromRow < toRow ? 1 : -1;\n  const colStep = fromCol < toCol ? 1 : -1;\n  let row = fromRow + rowStep;\n  let col = fromCol + colStep;\n  while (row !== toRow && col !== toCol) {\n    if (board[row][col] !== '') return false;\n    row += rowStep;\n    col += colStep;\n  }\n  return true;\n}\n// valid queen move\nfunction isValidQueenMove(from, to) {\n  return isValidRookMove(from, to) || isValidBishopMove(from, to);\n}\n// valid king move\nfunction isValidKingMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n  return rowDiff <= 1 && colDiff <= 1;\n}\n// check opponentpiece\nfunction isOpponentPiece(row, col, piece) {\n  const targetPiece = board[row][col];\n  if (targetPiece === '') return false;\n  return piece === piece.toUpperCase() && targetPiece === targetPiece.toLowerCase() || piece === piece.toLowerCase() && targetPiece === targetPiece.toUpperCase();\n}\n// check validity\n\nexport function isValidMove(from, to, piece) {\n  switch (piece.toLowerCase()) {\n    case 'p':\n      return isValidPawnMove(from, to, piece);\n    case 'r':\n      return isValidRookMove(from, to);\n    case 'n':\n      return isValidKnightMove(from, to);\n    case 'b':\n      return isValidBishopMove(from, to);\n    case 'q':\n      return isValidQueenMove(from, to);\n    case 'k':\n      return isValidKingMove(from, to);\n    default:\n      return false;\n  }\n}","map":{"version":3,"names":["board","isValidPawnMove","from","to","piece","fromCol","fromRow","toCol","toRow","direction","startRow","Math","abs","isOpponentPiece","isValidRookMove","step","col","row","isValidKnightMove","rowDiff","colDiff","isValidBishopMove","rowStep","colStep","isValidQueenMove","isValidKingMove","targetPiece","toUpperCase","toLowerCase","isValidMove"],"sources":["/home/blackbird/Documents/chessgame/frontend/src/script.js"],"sourcesContent":["const board = [\n  ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],\n  ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n  ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']\n];\n\n// pawn move validation\nfunction isValidPawnMove(from, to, piece) {\n  const [fromCol,fromRow] = from;\n  const [toCol,toRow ] = to;\n  const direction = piece === 'P' ? -1 : 1;\n  const startRow = piece === 'P' ? 7 : 1;\n\n  if (toCol === fromCol) {\n    // Regular move\n\n    if (board[toRow][toCol] === '') {\n      if (toRow === fromRow + direction) return true;\n      if (fromRow === startRow+1 && toRow === fromRow + 2 * direction && board[fromRow + direction][fromCol] === '') return true;\n    }\n  } else if (Math.abs(toCol - fromCol) === 1) {\n    // Capture\n    if (board[toRow][toCol] !== '' && isOpponentPiece(toRow, toCol, piece)) {\n      return toRow === fromRow + direction;\n    }\n  }\n\n  return false;\n}\n// valid rook move\nfunction isValidRookMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n\n  if (fromRow === toRow) {\n    const step = fromCol < toCol ? 1 : -1;\n    for (let col = fromCol + step; col !== toCol; col += step) {\n      if (board[fromRow][col] !== '') return false;\n    }\n  } else {\n    const step = fromRow < toRow ? 1 : -1;\n    for (let row = fromRow + step; row !== toRow; row += step) {\n      if (board[row][fromCol] !== '') return false;\n    }\n  }\n\n  return true;\n}\n// valid knight move\nfunction isValidKnightMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n\n  return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);\n}\n// valid bishop move\nfunction isValidBishopMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n\n  const rowStep = fromRow < toRow ? 1 : -1;\n  const colStep = fromCol < toCol ? 1 : -1;\n\n  let row = fromRow + rowStep;\n  let col = fromCol + colStep;\n  while (row !== toRow && col !== toCol) {\n    if (board[row][col] !== '') return false;\n    row += rowStep;\n    col += colStep;\n  }\n\n  return true;\n}\n// valid queen move\nfunction isValidQueenMove(from, to) {\n  return isValidRookMove(from, to) || isValidBishopMove(from, to);\n}\n// valid king move\nfunction isValidKingMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n\n  return rowDiff <= 1 && colDiff <= 1;\n}\n// check opponentpiece\nfunction isOpponentPiece(row, col, piece) {\n  const targetPiece = board[row][col];\n  if (targetPiece === '') return false;\n\n  return (piece === piece.toUpperCase() && targetPiece === targetPiece.toLowerCase()) ||\n         (piece === piece.toLowerCase() && targetPiece === targetPiece.toUpperCase());\n}\n// check validity\n\nexport function isValidMove(from, to, piece) {\n  switch (piece.toLowerCase()) {\n    case 'p': return isValidPawnMove(from, to, piece);\n    case 'r': return isValidRookMove(from, to);\n    case 'n': return isValidKnightMove(from, to);\n    case 'b': return isValidBishopMove(from, to);\n    case 'q': return isValidQueenMove(from, to);\n    case 'k': return isValidKingMove(from, to);\n    default: return false;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}