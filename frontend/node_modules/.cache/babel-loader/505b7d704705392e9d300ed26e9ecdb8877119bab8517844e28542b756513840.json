{"ast":null,"code":"const board = [['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'], ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', ''], ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'], ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']];\n\n// pawn move validation\nfunction isValidPawnMove(from, to, piece) {\n  const [fromCol, fromRow] = from;\n  const [toCol, toRow] = to;\n  const direction = piece === 'P' ? -1 : 1;\n  const startRow = piece === 'P' ? 6 : 1;\n  console.log(fromCol, fromRow, toc);\n  if (toCol === fromCol) {\n    // Regular move\n    if (board[toRow][toCol] === '') {\n      console.log('hello2');\n      if (toRow === fromRow + direction) return true;\n      if (fromRow === startRow + 1 && toRow === fromRow + 2 * direction && board[fromRow + direction][fromCol] === '') return true;\n    }\n  } else if (Math.abs(toCol - fromCol) === 1) {\n    // Capture\n    if (board[toRow][toCol] !== '' && isOpponentPiece(toRow, toCol, piece)) {\n      return toRow === fromRow + direction;\n    }\n  }\n  return false;\n}\n// valid rook move\nfunction isValidRookMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n  if (fromRow === toRow) {\n    const step = fromCol < toCol ? 1 : -1;\n    for (let col = fromCol + step; col !== toCol; col += step) {\n      if (board[fromRow][col] !== '') return false;\n    }\n  } else {\n    const step = fromRow < toRow ? 1 : -1;\n    for (let row = fromRow + step; row !== toRow; row += step) {\n      if (board[row][fromCol] !== '') return false;\n    }\n  }\n  return true;\n}\n// valid knight move\nfunction isValidKnightMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n  return rowDiff === 2 && colDiff === 1 || rowDiff === 1 && colDiff === 2;\n}\n// valid bishop move\nfunction isValidBishopMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n  const rowStep = fromRow < toRow ? 1 : -1;\n  const colStep = fromCol < toCol ? 1 : -1;\n  let row = fromRow + rowStep;\n  let col = fromCol + colStep;\n  while (row !== toRow && col !== toCol) {\n    if (board[row][col] !== '') return false;\n    row += rowStep;\n    col += colStep;\n  }\n  return true;\n}\n// valid queen move\nfunction isValidQueenMove(from, to) {\n  return isValidRookMove(from, to) || isValidBishopMove(from, to);\n}\n// valid king move\nfunction isValidKingMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n  return rowDiff <= 1 && colDiff <= 1;\n}\n// check opponentpiece\nfunction isOpponentPiece(row, col, piece) {\n  const targetPiece = board[row][col];\n  if (targetPiece === '') return false;\n  return piece === piece.toUpperCase() && targetPiece === targetPiece.toLowerCase() || piece === piece.toLowerCase() && targetPiece === targetPiece.toUpperCase();\n}\n// check validity\n\nexport function isValidMove(from, to, piece) {\n  switch (piece.toLowerCase()) {\n    case 'p':\n      return isValidPawnMove(from, to, piece);\n    case 'r':\n      return isValidRookMove(from, to);\n    case 'n':\n      return isValidKnightMove(from, to);\n    case 'b':\n      return isValidBishopMove(from, to);\n    case 'q':\n      return isValidQueenMove(from, to);\n    case 'k':\n      return isValidKingMove(from, to);\n    default:\n      return false;\n  }\n}","map":{"version":3,"names":["board","isValidPawnMove","from","to","piece","fromCol","fromRow","toCol","toRow","direction","startRow","console","log","toc","Math","abs","isOpponentPiece","isValidRookMove","step","col","row","isValidKnightMove","rowDiff","colDiff","isValidBishopMove","rowStep","colStep","isValidQueenMove","isValidKingMove","targetPiece","toUpperCase","toLowerCase","isValidMove"],"sources":["/home/blackbird/Documents/chessgame/frontend/src/script.js"],"sourcesContent":["const board = [\n  ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],\n  ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['', '', '', '', '', '', '', ''],\n  ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],\n  ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']\n];\n\n// pawn move validation\nfunction isValidPawnMove(from, to, piece) {\n  const [fromCol,fromRow] = from;\n  const [toCol,toRow ] = to;\n  const direction = piece === 'P' ? -1 : 1;\n  const startRow = piece === 'P' ? 6 : 1;\nconsole.log(fromCol,fromRow,toc);\n  if (toCol === fromCol) {\n    // Regular move\n    if (board[toRow][toCol] === '') {\n      console.log('hello2');\n\n      if (toRow === fromRow + direction) return true;\n      if (fromRow === startRow+1 && toRow === fromRow + 2 * direction && board[fromRow + direction][fromCol] === '') return true;\n    }\n  } else if (Math.abs(toCol - fromCol) === 1) {\n    // Capture\n    if (board[toRow][toCol] !== '' && isOpponentPiece(toRow, toCol, piece)) {\n      return toRow === fromRow + direction;\n    }\n  }\n\n  return false;\n}\n// valid rook move\nfunction isValidRookMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n\n  if (fromRow === toRow) {\n    const step = fromCol < toCol ? 1 : -1;\n    for (let col = fromCol + step; col !== toCol; col += step) {\n      if (board[fromRow][col] !== '') return false;\n    }\n  } else {\n    const step = fromRow < toRow ? 1 : -1;\n    for (let row = fromRow + step; row !== toRow; row += step) {\n      if (board[row][fromCol] !== '') return false;\n    }\n  }\n\n  return true;\n}\n// valid knight move\nfunction isValidKnightMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n\n  return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);\n}\n// valid bishop move\nfunction isValidBishopMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n\n  const rowStep = fromRow < toRow ? 1 : -1;\n  const colStep = fromCol < toCol ? 1 : -1;\n\n  let row = fromRow + rowStep;\n  let col = fromCol + colStep;\n  while (row !== toRow && col !== toCol) {\n    if (board[row][col] !== '') return false;\n    row += rowStep;\n    col += colStep;\n  }\n\n  return true;\n}\n// valid queen move\nfunction isValidQueenMove(from, to) {\n  return isValidRookMove(from, to) || isValidBishopMove(from, to);\n}\n// valid king move\nfunction isValidKingMove(from, to) {\n  const [fromRow, fromCol] = from;\n  const [toRow, toCol] = to;\n\n  const rowDiff = Math.abs(fromRow - toRow);\n  const colDiff = Math.abs(fromCol - toCol);\n\n  return rowDiff <= 1 && colDiff <= 1;\n}\n// check opponentpiece\nfunction isOpponentPiece(row, col, piece) {\n  const targetPiece = board[row][col];\n  if (targetPiece === '') return false;\n\n  return (piece === piece.toUpperCase() && targetPiece === targetPiece.toLowerCase()) ||\n         (piece === piece.toLowerCase() && targetPiece === targetPiece.toUpperCase());\n}\n// check validity\n\nexport function isValidMove(from, to, piece) {\n  switch (piece.toLowerCase()) {\n    case 'p': return isValidPawnMove(from, to, piece);\n    case 'r': return isValidRookMove(from, to);\n    case 'n': return isValidKnightMove(from, to);\n    case 'b': return isValidBishopMove(from, to);\n    case 'q': return isValidQueenMove(from, to);\n    case 'k': return isValidKingMove(from, to);\n    default: return false;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}